name: DigitalOcean Backup & Migrate

on:
  schedule:
    # Run at 3 AM UTC every day
    - cron: "0 3 * * *"
  workflow_dispatch:
    inputs:
      action:
        description: "Action to perform"
        required: true
        default: "backup"
        type: choice
        options:
          - backup
          - migrate
          - backup-and-migrate

jobs:
  noop:
    if: false
    runs-on: ubuntu-latest
    steps:
      - run: echo "Deprecated DO backup/migrate; use Render DB tools instead."

  notify:
    runs-on: ubuntu-latest
    needs: [noop]
    name: Notify Results
    if: false

    steps:
      - name: Notify GitHub
        uses: actions/github-script@v7
        if: github.event_name == 'schedule'
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            console.log('Workflow result: Deprecated DO backup/migrate; use Render DB tools instead.')
